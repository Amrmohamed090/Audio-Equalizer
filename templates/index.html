<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.regions.min.js"></script>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--    import google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <!--    -->
    <link rel="stylesheet" href="../static/styles/all.min.css">
    <link rel="stylesheet" href="../static/styles/bootstrap-grid.css">
    <link rel="stylesheet" href="../static/styles/style.css">
    
    <title>Equalizer</title>
    
</head>
<body>

  <div class="container"> 

    <div id="original"></div>
        <div id="minimap2"></div>
        <div id="waveform"></div>
        <div id="wave-spectrogram"></div>
        <div id="minimap"></div>
        <button class="accordion">Section 1</button>
        <div class="panel">
          <p>Lorem ipsum...</p>
        </div>
  
    <form method="post" name="change_mode" enctype=multipart/form-data>
      <div class="formats">
        
  
  
  
        <div class="radios">
          
            <input type="radio" id="uniform" name="Mode" value="uniform" {% if mode == 'uniform'%}checked="checked"{%endif%}>
            <label for="uniform">Uniform</label><br>
            <input type="radio" id="musical" name="Mode" value="musical" {% if mode == 'musical'%}checked="checked"{%endif%}>
            <label for="musical">Musical</label><br>
            <input type="radio" id="vocal" name="Mode" value="vocal" {% if mode == 'vocal'%}checked="checked"{%endif%}>
            <label for="vocal">Vocal</label><br>
            <input type="radio" id="ECG" name="Mode" value="ECG" {% if mode == 'ECG'%}checked="checked"{%endif%}>
            <label for="ECG">ECG</label>
            <div class="buttons">
              <button type="submit" name="" value="submit" class="sin btn btn-primary">
                <span>Submit</span>
              </button>
            </div>

        </div>
            
            
  
            <div class="sliders row card" id="sliders" >
            </div>
    
    
      </div>
  </form>
  </div>
</div>
  <div class="footer">
    <div class="container">


      <div class="fileUpload">
          <form method="post" enctype=multipart/form-data>
              <input type="file" id="file" name=file>
              <button type="submit" name="" value="upload" class="sin btn btn-primary ">Upload</button>
          </form>
        </div>
      
            
            <button class="btn btn-primary" onclick="run()">
            <i class="glyphicon glyphicon-play"></i>
            Play/Pause
            </button>
    </div>
  </div>
</body>
<script>

  //sliders stuff
  
var radios = document.getElementsByName('Mode');
var prev = null;
var mode = ""
const sliders_vals = {{ sliders_values|safe }}
for (var i = 0, length = radios.length; i < length; i++) {
  if (radios[i].checked) {
    mode = radios[i].value;
        number_of_sliders={"uniform":10,"musical":4,"vocal":4,"ECG":3}
      len = number_of_sliders[mode]
      var sliders_div = document.getElementById("sliders");
      var str = ""
      console.log(len)
      for (var i = 0; i < len; i++) {
        const slider_id = "slider" + i

        str= str +'<div class="input col-1"><p class="range-name">1500Hz <br> 2000Hz</p><input type="range" class="vranger" name="'+slider_id +'" value='+sliders_vals[i]+ ' min="-20" max="20" oninput="this.nextElementSibling.value = this.value""/> <output class="slider-output">'+sliders_vals[i]+'</output></div>'

          }

        sliders_div.innerHTML = str ;
    
    break;
  }
}

var rad = document.change_mode.Mode;


for (var i = 0; i < rad.length; i++) {
    rad[i].addEventListener('change', function() {
        if (this !== prev) {
            prev = this;
        }
        mode = this.value
        number_of_sliders={"uniform":10,"musical":4,"vocal":4,"ECG":3}

      len = number_of_sliders[mode]
      var sliders_div = document.getElementById("sliders");
      var str = ""
      const sliders_vals2 = [0,0,0,0,0,0,0,0,0,0]
      for (var i = 0; i < len; i++) {
        const slider_id = "slider" + i
        if(sliders_vals2[i] != null){
          str= str +'<div class="input col-1"><p class="range-name">1500Hz <br> 2000Hz</p><input type="range" class="vranger" name="'+slider_id +'" value='+sliders_vals2[i]+ ' min="-20" max="20" oninput="this.nextElementSibling.value = this.value""/> <output class="slider-output">'+sliders_vals2[i]+'</output></div>'
        }
        else{
          str= str +'<div class="input col-1"><p class="range-name">1500Hz <br> 2000Hz</p><input type="range" class="vranger" name="'+slider_id +'" value=0 min="-20" max="20" oninput="this.nextElementSibling.value = this.value""/> <output class="slider-output">0</output></div>'
        }


          }

        sliders_div.innerHTML = str ;
        });
}


</script>
<script src="../static/script/main.js"></script>


</html>