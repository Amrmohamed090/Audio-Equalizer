<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.regions.min.js"></script>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--    import google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;1,300;1,400;1,500;1,900&display=swap" rel="stylesheet">
    <!--    -->
    <link rel="stylesheet" href="../static/styles/all.min.css">
    <link rel="stylesheet" href="../static/styles/bootstrap.min.css">
    <link rel="stylesheet" href="../static/styles/style.css">
    <title>Equalizer</title>
    
</head>
<body>
  <div class="mode">
  <form method="post" name="change_mode" enctype=multipart/form-data>
  
        <input type="radio" id="uniform" name="Mode" value="uniform" checked="checked">
        <label for="uniform">Uniform</label><br>
        <input type="radio" id="musical" name="Mode" value="musical">
        <label for="musical">Musical</label><br>
        <input type="radio" id="vocal" name="Mode" value="vocal">
        <label for="vocal">Vocal</label><br>
        <input type="radio" id="ECG" name="Mode" value="ECG">
        <label for="ECG">ECG</label>
        
        
        
      
        <div class="audio-editor">
          
        <div class="sliders" id="sliders" >
      </div>

      <button type="submit" name="" value="submit" class="sin btn btn-primary mt-4" style="width: 100px;">Submit</button>
</form>
</div>
</div>

<div class="fileUpload">
    <form method="post" enctype=multipart/form-data>
        <input type="file" id="file" name=file>
        <button type="submit" name="" value="upload" class="sin btn btn-primary mt-4" style="width: 100px;">Upload</button>
    </form>
  </div>

      <div id="original"></div>
      <div id="minimap2"></div>
      <div id="waveform"></div>
      <div id="wave-spectrogram"></div>
      <div id="minimap"></div>

      <button class="btn btn-primary" onclick="run()">
      <i class="glyphicon glyphicon-play"></i>
      Play/Pause
      </button>

    
</body>
<script>

  //sliders stuff
  
var radios = document.getElementsByName('Mode');
var prev = null;
var mode = ""
for (var i = 0, length = radios.length; i < length; i++) {
  if (radios[i].checked) {
    mode = radios[i].value;
        number_of_sliders={"uniform":10,"musical":4,"vocal":4,"ECG":3}
      len = number_of_sliders[mode]
      var sliders_div = document.getElementById("sliders");
      var str = ""
      console.log(len)
      for (var i = 0; i < len; i++) {
        const slider_id = "slider" + i
        str= str +'<input type="range" class="vranger" name="'+slider_id +'" value="0" min="-20" max="20" oninput="this.nextElementSibling.value = this.value""/> <output></output>'

          }

        sliders_div.innerHTML = str ;
    
    break;
  }
}

var rad = document.change_mode.Mode;
const sliders_vals = {{ sliders_values|safe }}
console.log(sliders_vals)
for (var i = 0; i < rad.length; i++) {
    rad[i].addEventListener('change', function() {
        if (this !== prev) {
            prev = this;
        }
        mode = this.value
        number_of_sliders={"uniform":10,"musical":4,"vocal":4,"ECG":3}
      len = number_of_sliders[mode]
      var sliders_div = document.getElementById("sliders");
      var str = ""
      for (var i = 0; i < len; i++) {
        const slider_id = "slider" + i
        str= str +'<input type="range" class="vranger" name="'+slider_id +'" value="0" min="-20" max="20" oninput="this.nextElementSibling.value = this.value""/> <output></output>'

          }

        sliders_div.innerHTML = str ;
        });
}


</script>
<script src="../static/script/main.js"></script>

</html>